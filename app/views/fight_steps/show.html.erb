<section class="nes-container with-title align-center fight-step">
  <h3 class="title">Step <%= params[:id] %></h3>
  <div class="flex-container space-between fight-step__description">
    <div>
      <%= render_action fighters: @fighters, step: @step, fighter_index: 0, position: :left %>
    </div>
    <div>
      <p>
        <%= attack_description(@step.damage_points) %>
      </p>
    </div>
    <div>
      <%= render_action fighters: @fighters, step: @step, fighter_index: 1, position: :right %>
    </div>
  </div>

  <% if @is_last_step %>
    <div class="fight-step__result">
      <% if @fight.winner %>
        <%= render partial: "winner", locals: { winner: @fight.winner } %>
      <% else %>
        <%= render partial: "draw" %>
      <% end %>
    </div>
  <% end %>

  <% if @is_last_step %>
    <div><%= link_to "Back to arena", root_path, class: "nes-btn" %></div>
  <% else %>
    <div><%= link_to "Next", fight_step_path(@fight.id, params[:id].to_i + 1), class: "nes-btn is-primary next" %></div>
  <% end %>
</div>
